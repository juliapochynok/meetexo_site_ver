{"version":3,"sources":["webpack:///./src/Preview.js"],"names":["cache","Preview","image","e","key","props","onClick","this","mounted","fetchImage","prevProps","url","light","setState","window","fetch","then","response","json","data","thumbnail_url","replace","playIcon","state","flexCenter","display","alignItems","justifyContent","styles","preview","width","height","backgroundImage","undefined","backgroundSize","backgroundPosition","cursor","shadow","background","borderRadius","borderStyle","borderWidth","borderColor","marginLeft","defaultPlayIcon","style","className","tabIndex","onKeyPress","handleKeyPress","Component"],"mappings":"6nEAEA,IAEMA,EAAQ,GAEOC,E,qaACT,G,eACF,CACNC,MAAO,O,yBAwCQ,SAAAC,GACD,UAAVA,EAAEC,KAA6B,MAAVD,EAAEC,KACzB,EAAKC,MAAMC,a,2DAtCbC,KAAKC,SAAU,EACfD,KAAKE,WAAWF,KAAKF,S,yCAGHK,GAAW,MACNH,KAAKF,MAApBM,EADqB,EACrBA,IAAKC,EADgB,EAChBA,MACTF,EAAUC,MAAQA,GAAOD,EAAUE,QAAUA,GAC/CL,KAAKE,WAAWF,KAAKF,S,6CAKvBE,KAAKC,SAAU,I,oCAGW,WAAdG,EAAc,EAAdA,IAAKC,EAAS,EAATA,MACjB,GAAqB,iBAAVA,EAAX,CAIA,IAAIZ,EAAMW,GAKV,OADAJ,KAAKM,SAAS,CAAEX,MAAO,OAChBY,OAAOC,MAAP,wCAA8CJ,IAClDK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACJ,GAAIA,EAAKC,eAAiB,EAAKZ,QAAS,CACtC,IAAMN,EAAQiB,EAAKC,cAAcC,QAAQ,aAAc,cACvD,EAAKR,SAAS,CAAEX,UAChBF,EAAMW,GAAOT,MAVjBK,KAAKM,SAAS,CAAEX,MAAOF,EAAMW,UAJ7BJ,KAAKM,SAAS,CAAEX,MAAOU,M,+BAyBjB,MACsBL,KAAKF,MAA3BC,EADA,EACAA,QAASgB,EADT,EACSA,SACTpB,EAAUK,KAAKgB,MAAfrB,MACFsB,EAAa,CACjBC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEZC,EAAS,CACbC,QAAS,EAAF,CACLC,MAAO,OACPC,OAAQ,OACRC,gBAAiB9B,EAAQ,OAAH,OAAUA,EAAV,UAAqB+B,EAC3CC,eAAgB,QAChBC,mBAAoB,SACpBC,OAAQ,WACLZ,GAELa,OAAQ,EAAF,CACJC,WAAY,2DACZC,aAzEU,OA0EVT,MA1EU,OA2EVC,OA3EU,QA4EPP,GAELF,SAAU,CACRkB,YAAa,QACbC,YAAa,mBACbC,YAAa,4CACbC,WAAY,QAGVC,EACJ,yBAAKC,MAAOjB,EAAOS,OAAQS,UAAU,wBACnC,yBAAKD,MAAOjB,EAAON,SAAUwB,UAAU,6BAG3C,OACE,yBACED,MAAOjB,EAAOC,QACdiB,UAAU,wBACVxC,QAASA,EACTyC,SAAU,EACVC,WAAYzC,KAAK0C,gBAEhB3B,GAAYsB,Q,8BA9FgBM","file":"5.app.js","sourcesContent":["import React, { Component } from 'react'\n\nconst ICON_SIZE = '64px'\n\nconst cache = {}\n\nexport default class Preview extends Component {\n  mounted = false\n  state = {\n    image: null\n  }\n\n  componentDidMount () {\n    this.mounted = true\n    this.fetchImage(this.props)\n  }\n\n  componentDidUpdate (prevProps) {\n    const { url, light } = this.props\n    if (prevProps.url !== url || prevProps.light !== light) {\n      this.fetchImage(this.props)\n    }\n  }\n\n  componentWillUnmount () {\n    this.mounted = false\n  }\n\n  fetchImage ({ url, light }) {\n    if (typeof light === 'string') {\n      this.setState({ image: light })\n      return\n    }\n    if (cache[url]) {\n      this.setState({ image: cache[url] })\n      return\n    }\n    this.setState({ image: null })\n    return window.fetch(`https://noembed.com/embed?url=${url}`)\n      .then(response => response.json())\n      .then(data => {\n        if (data.thumbnail_url && this.mounted) {\n          const image = data.thumbnail_url.replace('height=100', 'height=480')\n          this.setState({ image })\n          cache[url] = image\n        }\n      })\n  }\n\n  handleKeyPress = e => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this.props.onClick()\n    }\n  }\n\n  render () {\n    const { onClick, playIcon } = this.props\n    const { image } = this.state\n    const flexCenter = {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n    const styles = {\n      preview: {\n        width: '100%',\n        height: '100%',\n        backgroundImage: image ? `url(${image})` : undefined,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        cursor: 'pointer',\n        ...flexCenter\n      },\n      shadow: {\n        background: 'radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)',\n        borderRadius: ICON_SIZE,\n        width: ICON_SIZE,\n        height: ICON_SIZE,\n        ...flexCenter\n      },\n      playIcon: {\n        borderStyle: 'solid',\n        borderWidth: '16px 0 16px 26px',\n        borderColor: 'transparent transparent transparent white',\n        marginLeft: '7px'\n      }\n    }\n    const defaultPlayIcon = (\n      <div style={styles.shadow} className='react-player__shadow'>\n        <div style={styles.playIcon} className='react-player__play-icon' />\n      </div>\n    )\n    return (\n      <div\n        style={styles.preview}\n        className='react-player__preview'\n        onClick={onClick}\n        tabIndex={0}\n        onKeyPress={this.handleKeyPress}\n      >\n        {playIcon || defaultPlayIcon}\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}